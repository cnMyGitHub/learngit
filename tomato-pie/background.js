parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"iz0v":[function(require,module,exports) {
"use strict";function t(t,a){return r(t)||o(t,a)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t,e){var o=[],r=!0,a=!1,s=void 0;try{for(var l,n=t[Symbol.iterator]();!(r=(l=n.next()).done)&&(o.push(l.value),!e||o.length!==e);r=!0);}catch(c){a=!0,s=c}finally{try{r||null==n.return||n.return()}finally{if(a)throw s}}return o}function r(t){if(Array.isArray(t))return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const a={get:()=>localStorage.getItem("isShowInfo"),set:t=>{t?localStorage.setItem("isShowInfo",!0):localStorage.removeItem("isShowInfo")}},s={get:()=>Number(localStorage.getItem("currentStartAt")),put:t=>localStorage.setItem("currentStartAt",t),remove:()=>localStorage.removeItem("currentStartAt")},l={getAll:()=>{const t=JSON.parse(localStorage.getItem("tomatoList"));return t||[]},get12h:()=>{const t=JSON.parse(localStorage.getItem("tomatoList"));return t?t.filter(t=>t.startAt>(new Date).getTime()-432e5):[]},push:t=>{const e=JSON.parse(localStorage.getItem("tomatoList"));let o;return o=e?e.concat(t):[t],localStorage.setItem("tomatoList",JSON.stringify(o)),o},pop:()=>{const t=JSON.parse(localStorage.getItem("tomatoList")).slice(0,-1);return localStorage.setItem("tomatoList",JSON.stringify(t)),t}},n={getAll:()=>{const t=JSON.parse(localStorage.getItem("todoList"));return t||[]},remove:t=>{const e=JSON.parse(localStorage.getItem("todoList")).filter(e=>e.createdAt!==t);return localStorage.setItem("todoList",JSON.stringify(e)),e},push:t=>{const e=JSON.parse(localStorage.getItem("todoList"));let o;return o=e?e.concat(t):[t],localStorage.setItem("todoList",JSON.stringify(o)),o},update:(t,e)=>{const o=JSON.parse(localStorage.getItem("todoList")).map(o=>{const r=o;return r.createdAt===t&&(r.content=e),r});return localStorage.setItem("todoList",JSON.stringify(o)),o},move:(e,o)=>{const r=JSON.parse(localStorage.getItem("todoList")),a=t(r.splice(e,1),1)[0];r.splice(o,0,a);const s=r;return localStorage.setItem("todoList",JSON.stringify(s)),s}},c={getAll:()=>JSON.parse(localStorage.getItem("doneList")),remove:t=>{const e=JSON.parse(localStorage.getItem("doneList")).filter(e=>e.createdAt!==t);return localStorage.setItem("doneList",JSON.stringify(e)),e},push:t=>{const e=JSON.parse(localStorage.getItem("doneList"));let o;return o=e?e.concat(t):[t],localStorage.setItem("doneList",JSON.stringify(o)),o}};var i={ShowInfo:a,CurrentStartAt:s,Tomato:l,Todo:n,Done:c};exports.default=i;
},{}],"+bEr":[function(require,module,exports) {
"use strict";var t=e(require("./store"));function e(t){return t&&t.__esModule?t:{default:t}}const o=6e4;chrome.browserAction.onClicked.addListener(()=>{window.focus(),chrome.tabs.create({})}),chrome.notifications.onClicked.addListener(t=>{window.focus(),chrome.tabs.create({}),chrome.notifications.clear(t)});let r,a,n=25,i=5;async function c(){0===i?(chrome.browserAction.setBadgeText({text:""}),chrome.notifications.create({type:"basic",iconUrl:"assets/tomato.png",title:"休息差不多了吧？该开始番茄工作啦。",message:(new Date).toLocaleTimeString(),requireInteraction:!0,buttons:[{title:"为当前任务立刻启动新的番茄计时"},{title:"放弃当前番茄"}]}),await t.default.CurrentStartAt.remove()):(chrome.browserAction.setBadgeText({text:`${i.toString()}m`}),chrome.browserAction.setBadgeBackgroundColor({color:"green"}),i-=1,a=setTimeout(c,o))}async function s(){0===n?(i=5,c(),chrome.notifications.create({type:"basic",iconUrl:"assets/tomato.png",title:"番茄任务完成，休息一下吧。",message:(new Date).toLocaleTimeString(),eventTime:Date.now()+1e4})):(chrome.browserAction.setBadgeText({text:`${n.toString()}m`}),chrome.browserAction.setBadgeBackgroundColor({color:"red"}),n-=1,r=setTimeout(s,o))}function d(){n=25,i=5,clearTimeout(r),clearTimeout(a),s()}chrome.notifications.onButtonClicked.addListener(async(e,o)=>{const r=new Date,a=await t.default.Tomato.getAll(),n=a[a.length-1];if(0===o){const e=r.getTime(),o={startAt:e,todoId:n.todoId};await t.default.Tomato.push(o),await t.default.CurrentStartAt.put(e),chrome.browserAction.setBadgeText({text:"25m"}),chrome.browserAction.setBadgeBackgroundColor({color:"red"}),d()}else 1===o&&await t.default.Tomato.pop()}),window.startTimer=d;
},{"./store":"iz0v"}]},{},["+bEr"], null)